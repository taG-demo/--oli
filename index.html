<html>
<head>
<style type="text/css">
*{margin:0; padding:0; font-family:helvetica, arial, sans-serif}
body{position:relative}
</style>
</head>
<body>

<div id="container">
</div>

<script id="2d-vertex-shader" type="x-shader/x-vertex">
precision mediump float;
attribute vec2 a_position;

varying vec2 v_textureCoord;

uniform float u_t;

void main(){
  gl_Position = vec4(a_position , 0, 1); // + vec4( cos(u_t / 1000.0), sin(u_t / 1000.0),0, 0 );
  v_textureCoord = a_position;
}
</script>

<script id="2d-fragment-shader" type="x-shader/x-fragment">
precision mediump float;

//uniform vec2  u_center;
//uniform vec2  u_resolution;
//uniform float u_radius;
uniform float u_t;

varying vec2 v_textureCoord;

uniform vec2  u_resolution;
uniform sampler2D u_sampler;

float d(vec2 o, vec2 p, float t){
  vec2 f = vec2(sin(t/1200.)/5. +.3, cos(t/1200.)/5. +.3);
  vec2 z = vec2(1.);
  return 1. / distance( o + z * f, p) +.3;
}

void main(){
  vec2 p          =  gl_FragCoord.xy / u_resolution.xy;
//  float theta     = atan( p.y, p.x );
  float d0        = d(vec2(0.1), p, u_t + 1000.);
  float d1        = d(vec2(0.2,0.2), p, u_t * 0.95 + 4000.); //1. / distance( vec2(1) , p)   +4.3;
  float d2        = d(vec2(0.4,0.1), p, u_t * 0.90);//1. / distance( vec2(0,1) , p) +4.3;
  float d3        = d(vec2(.3,.3), p, u_t * 1.1);
//  vec2 deltaP     = vec2(0.05) * u_center;
//  vec2 uv         = vec2(p.x ,p.y);
//  vec3 color      = ( 
//                    texture2D( u_sampler, uv).xyz + 
//                    texture2D( u_sampler, uv + ( deltaP * vec2( 1 ,  0) ) ).xyz + 
//                    texture2D( u_sampler, uv + ( deltaP * vec2( -1,  0) ) ).xyz + 
//                    texture2D( u_sampler, uv + ( deltaP * vec2( 0 ,  1) ) ).xyz + 
//                   texture2D( u_sampler, uv + ( deltaP * vec2( 0 , -1) ) ).xyz) / 5.0;
//  vec3 grad       = vec3( min( (d * d) * 3.0, 1.0 ) );
  float color      = dot( vec4(d1,d2,d3,d0), vec4( (cos(u_t/400.0) +6.0)/256.0 ) ) ;
  //vec3 color      = vec3(1.0, 0.1mod, 1.0) * d * 2.0 ;
//                  clamp( cos( p.x * 10000.) * 1000. , 0.2, 1.) * .4+ 
//                  clamp( cos( p.y * 10000.) * 1000. , 0.2, 1.) * .4;

  vec3 c = vec3(1.0, 1.0, 1.) * color ;
  for(float n = 0.1; n < 5.; n++){
    float decal = 0.2 * n;
    float ts = u_t/1600.;
    float w = .05  * p.x + 0.05 ;
    float sinus = sin( p.x * 2. + ts + decal  )/ 3.;
    if( p.y > 0.4 + sinus  && p.y <  .4 + w + sinus ) {
      c += vec3(.1, 0.2 * n, 0.2) * color;
    }
  }

if( mod(u_t, 300.) < 100. * cos(u_t / 100.) ){
    vec2 cDamier = clamp(cos(p*100000.)*10., 0.2, .8) * 0.7;
    float th = cos(u_t / 1000.) * .3 ;
    c *= (cDamier.x + cDamier.y) * 
          (texture2D( u_sampler,
              mat2( cos(th), sin(th), -sin(th), cos(th))  * p * vec2(1., -1.)  * 4. + vec2(0, cos(u_t/800.) ) ).xyz * 0.5) ;
    gl_FragColor    = vec4(c , 1.0);
  }
  else {
    vec2 cDamier = clamp(cos(p*100000.)*10., 0.2, .22) ;
    c *=  (cDamier.x + cDamier.y);
    gl_FragColor    = vec4(c , 1.0);
  }


}
</script>
<script type="text/javascript" src="build/oli.js"></script>

</body>

</html>
