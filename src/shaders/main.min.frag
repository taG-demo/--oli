precision mediump float;uniform float u_t,u_dotsVisible,u_timeIntensity;uniform vec2 u_resolution;uniform sampler2D u_sampler;uniform int u_fType,u_doRoto;const float a=30.;float n(vec2 b,vec2 c,float d){float e=1.;vec2 f,g;f=vec2(e*sin(d/1e3)/5.,e*cos(d/1e3)/5.);g=vec2(2);return 1./distance(b+g*f,c)+.3;}float o(vec2 b,vec2 c,float d,float e,float f){float g=f;vec2 h,i;h=vec2(g*sin(d/1e3)/5.,g*cos(d/1e3)/5.);i=vec2(2);return 1./distance(b+i*h,c)+.3;}float p(vec2 b,vec2 c,float d,float e){float f=1./e-1.;vec2 g,h;g=vec2(f*sin(d/1e3)/5.,f*cos(d/1e3)/5.);h=vec2(3);return 1./distance(b+h*g,c)+.3;}float q(vec2 b,vec2 c,float d){float e=sin(d/120.);vec2 f,g;f=vec2(e*sin(d/1e2)/5.,e*cos(d/1e2)/5.);g=vec2(0);return 1./distance(b+g*f,c)+.3;}void main(){vec2 b,d,h;b=gl_FragCoord.xy/u_resolution.xy;float c,i;c=0.;d=vec2(.5);for(float e=0.;e<a;e++)c+=(u_fType==2?n(d,b,u_t*1.5+1e3*e+3.2e4):u_fType==3?o(d,b,u_t*1.5+1e3*e+3.2e4,e,u_timeIntensity):u_fType==4?p(d,b,u_t*1.5+1e3*e+3.2e4,u_timeIntensity):q(d,b,u_t*1.5+1e3*e+3.2e4))*(.01+1./(1e2*u_timeIntensity))*min(max(u_dotsVisible,e)-e,1.);vec3 f=vec3(1)*c;for(float g=0.;g<5.;g++){float h,i,j,k;h=.2*g;i=u_t/160.;j=.05*b.x+.05*(sin(i)+1.)/2.;k=sin(b.x*2.+i+h)/3.;if(b.y>.4+k&&b.y<.4+j+k)f+=vec3(sin(g)*127.+128.,sin(g+1.)*127.+128.,sin(g+3.)*127.+128.)/256.*c;}h=clamp(cos(b*1e3)*10.,.2,.21);i=h.x+h.y;if(u_doRoto==1){float j,k,l,m;j=cos(u_t*.01)*1.3;k=cos(u_t*.01)*.1+1.;l=(f.x+f.y+f.z)/3.;m=texture2D(u_sampler,mat2(cos(j),sin(j),-sin(j),cos(j))*b*vec2(1,-1.)*k+vec2(0,cos(u_t/8e2))).x;gl_FragColor=vec4(f*i*.1+.7*l*m*i+(1.-m)*f*i,1);}else{vec2 h=clamp(cos(b*1e3)*10.,.2,.21);f*=h.x+h.y;gl_FragColor=vec4(f,1);}}